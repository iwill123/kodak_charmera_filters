# 仿柯达盲盒相机滤镜（硬二值化）

一个纯前端的小工具：上传图片，选择（或随机）一款“胶片感”颜色，配合阈值做硬二值化，再一键下载结果。无需后端、无需依赖，打开网页就能用。

- 在线体验：<http://kodak.luckylt.com/>

## 特性

- 纯前端本地处理：图片不上传服务器，处理过程都在浏览器里完成
- 硬二值化效果：边缘干脆利落，保留“盲盒相机”的强烈风格
- 经典色盘：内置多种好看的预设颜色，并支持自定义取色
- 随机盲盒：一键随机不同的颜色，适合“抽卡式”尝试
- 实时预览：选择图片 / 切换颜色 / 调阈值 / 调清晰度都会立刻更新结果
- 清晰度（模糊）预处理：在二值化之前先降低清晰度（更像相机/胶片的柔化感）
- 下载结果：导出 PNG
- 点击放大查看：原图和滤镜结果都支持弹窗放大（限制在浏览器 90% 宽高内）

## 使用方式

### 直接打开

这是一个静态页面项目，最简单的方式：

1. 克隆仓库到本地
2. 直接用浏览器打开 `index.html`

如果你遇到浏览器对本地文件访问的限制（少数环境会出现），可以用任意静态服务器启动（任选其一）：

- `python -m http.server 8000`
- `npx serve .`

然后访问 `http://localhost:8000/`。

### 交互说明（推荐从这里开始）

1. 上传图片：选择一张本地图片（不会上传到服务器）
2. 选择滤镜颜色：
   - 下拉框选预设色：适合快速得到“胶片味”
   - 自定义颜色：用系统取色器选你喜欢的颜色
   - 随机盲盒：每次随机一个预设色（尽量不与上一次重复）
3. 调整二值化阈值：数值越大，进入“亮区/染色”的像素越少；数值越小，染色区域越多
4. 调整图像清晰度：
   - `20`：最清晰（不做模糊）
   - `0`：最模糊（先模糊再做二值化，会明显改变结果形态）
5. 下载图片：点击“下载图片”，导出当前滤镜结果（PNG）
6. 放大查看：点击原始图片 / 滤镜效果图，可弹窗放大；再次点击关闭

## 预设颜色（部分）

色盘会持续调整/扩充，目前包含例如：

- 柯达经典黄、日出暖金、日落橙红、琥珀蜂蜜、肉桂复古棕、老胶片棕调
- 胶片暖红、玫瑰薄雾、樱花粉、霓虹洋红
- 森林深绿、橄榄青绿、薄荷青、海湾青蓝、晴空蓝、午夜深蓝、暮光紫、薰衣草紫雾

你也可以直接用“自定义颜色”选择任意色值。

## 实现原理（简述）

核心思路很简单：

1. 将原图绘制到 `canvas`
2. 可选：根据“图像清晰度”先做一次模糊（影响后续二值化边界）
3. 遍历像素计算亮度 \(luminance\)，与阈值比较
4. `luminance >= threshold`：该像素染成滤镜色；否则染成黑色

代码主要集中在：

- `script.js`：图像加载、参数监听、滤镜渲染、下载、弹窗放大
- `style.css`：暗色系 UI、布局、预览、弹窗样式

## 项目结构

```
.
├── index.html   # 页面结构与控件
├── style.css    # UI 样式（暗色系）
├── script.js    # 业务逻辑（Canvas 处理）
└── 需求.md      # 迭代需求记录
```

## 常见问题

### 为什么有些图片阈值一调就“糊成一片”？

硬二值化本质上是把灰度切成两档。高反差图、噪点多的图、或纹理复杂的图都会更敏感。你可以尝试：

- 微调阈值
- 适当降低“图像清晰度”（先模糊再二值化），让纹理变成更连续的块面

### 图片会上传吗？

不会。本项目没有后端，所有处理都发生在浏览器本地。

## 贡献

欢迎 PR / Issue：

- 增加更多“胶片感”预设色（最好附带颜色参考和命名思路）
- 优化移动端交互与布局
- 新增导出尺寸、批量处理、快捷键等提升效率的小功能

## License

MIT

